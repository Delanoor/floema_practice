/*! For license information please see main.26e66af1dd9c50597f29.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefleoma("main",{"./app/classes/Page.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var i=s("./node_modules/auto-bind/index.js"),a=s("./node_modules/events/events.js"),n=s.n(a),l=s("./node_modules/gsap/index.js"),r=s("./node_modules/prefix/index.js"),o=s.n(r),h=s("./node_modules/lodash/each.js"),m=s.n(h),c=s("./node_modules/lodash/map.js"),d=s.n(c),p=s("./app/animations/Button.js"),u=s("./app/animations/Link.js"),g=s("./app/animations/Label.js"),w=s("./app/animations/Title.js"),f=s("./app/animations/Parallax.js"),b=s("./app/animations/Paragraph.js"),v=s("./app/animations/Highlight.js"),P=s("./app/classes/Asyncload.js"),j=s("./app/utils/dom.js");const L=class extends(n()){constructor({classes:e,element:t,elements:s,id:a}){super(),(0,i.default)(this),this.classes={...e},this.selectors={element:t,elements:{preloaders:"[data-src]",animationsButtons:'[data-animation="button"]',animationsLinks:'[data-animation="link"]',animationsParallaxes:'[data-animation="parallax"]',animationHighlights:'[data-animation="highlight"]',animationLabels:'[data-animation="label"]',animationTitles:'[data-animation="title"]',animationParagraphs:'[data-animation="paragraph"]',...s}},this.scroll={ease:.07,position:0,current:0,target:0,limit:0},this.id=a,this.transformPrefix=o()("transform"),this.create()}create(){this.animations=[],this.element=document.querySelector(this.selectors.element),this.elements={},m()(this.selectors.elements,((e,t)=>{e instanceof window.HTMLElement||e instanceof window.NodeList||Array.isArray(e)?this.elements[t]=e:(this.elements[t]=this.element.querySelectorAll(e),0===this.elements[t].length?this.elements[t]=null:1===this.elements[t].length&&(this.elements[t]=this.element.querySelector(e)))})),this.createAnimations(),this.createObserver(),this.createPreloader()}createAnimations(){this.animationsButtons=(0,j.mapEach)(this.elements.animationsButtons,((e,t)=>new p.default({element:e}))),this.animations.push(...this.animationsButtons),this.animationsLinks=(0,j.mapEach)(this.elements.animationsLinks,((e,t)=>new u.default({element:e}))),this.animations.push(...this.animationsLinks),this.animationHighlights=d()(this.elements.animationHighlights,(e=>new v.default({element:e}))),this.animations.push(...this.animationHighlights),this.animationTitles=d()(this.elements.animationTitles,(e=>new w.default({element:e}))),this.animations.push(...this.animationTitles),this.animationsParallaxes=(0,j.mapEach)(this.elements.animationsParallaxes,(e=>new f.default({element:e}))),this.animations.push(...this.animationsParallaxes),this.animationParagraphs=d()(this.elements.animationParagraphs,(e=>new b.default({element:e}))),this.animations.push(...this.animationParagraphs),this.animationLabels=d()(this.elements.animationLabels,(e=>new g.default({element:e}))),this.animations.push(...this.animationLabels)}createObserver(){this.observer=new window.ResizeObserver((e=>{for(const t of e)window.requestAnimationFrame((()=>{this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight}))})),this.observer.observe(this.elements.wrapper)}createPreloader(){this.preloaders=d()(this.elements.preloaders,(e=>new P.default({element:e})))}reset(){this.scroll={ease:.07,position:0,current:0,target:0,limit:0}}set(e){this.scroll.current=this.scroll.target=this.scroll.last=e,this.transform(this.elements.wrapper,this.scroll.current)}show(e){return this.reset(),this.isVisible=!0,this.addEventListeners(),l.default.set(document.documentElement,{backgroundColor:this.element.getAttribute("data-background"),color:this.element.getAttribute("data-color")}),Promise.resolve()}hide(e){return this.isVisible=!1,this.removeEventListeners(),Promise.resolve()}transform(e,t){e.style[this.transformPrefix]=`translate3d(0, ${-Math.round(t)}px, 0)`}onResize(){this.elements.wrapper&&window.requestAnimationFrame((()=>{this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight,m()(this.animations,(e=>e.onResize&&e.onResize()))}))}onWheel(e){const t=e.pixelY;return this.scroll.target+=t,t}update(){this.scroll.target=l.default.utils.clamp(0,this.scroll.limit,this.scroll.target),this.scroll.current=l.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.ease),this.scroll.current<.01&&(this.scroll.current=0),this.elements.wrapper&&this.transform(this.elements.wrapper,this.scroll.current),m()(this.animations,(e=>{e.update&&e.update(this.scroll)})),this.scroll.last=this.scroll.current}addEventListeners(){}removeEventListeners(){}}}},(function(e){e.h=()=>"620421e84d222343c156"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q085RSxLQUFLSixTQUFTdUQsU0FFbkIxQixPQUFPeUIsdUJBQXNCLEtBQzNCbEQsS0FBS1UsT0FBT0ssTUFDVmYsS0FBS0osU0FBU3VELFFBQVFDLGFBQWUzQixPQUFPNEIsWUFFOUMvQixJQUNFdEIsS0FBS21CLFlBQ0o0RCxHQUFjQSxFQUFVRCxVQUFZQyxFQUFVRCxZQUNoRCxHQUVMLENBRUFFLFFBQVFDLEdBQ04sTUFBTUMsRUFBUUQsRUFBZ0JFLE9BSTlCLE9BRkFuRixLQUFLVSxPQUFPSSxRQUFVb0UsRUFFZkEsQ0FDVCxDQU1BRSxTQUNFcEYsS0FBS1UsT0FBT0ksT0FBU21ELEVBQUFBLFFBQUFBLE1BQUFBLE1BQ25CLEVBQ0FqRSxLQUFLVSxPQUFPSyxNQUNaZixLQUFLVSxPQUFPSSxRQUdkZCxLQUFLVSxPQUFPRyxRQUFVb0QsRUFBQUEsUUFBQUEsTUFBQUEsWUFDcEJqRSxLQUFLVSxPQUFPRyxRQUNaYixLQUFLVSxPQUFPSSxPQUNaZCxLQUFLVSxPQUFPQyxNQUdWWCxLQUFLVSxPQUFPRyxRQUFVLE1BQ3hCYixLQUFLVSxPQUFPRyxRQUFVLEdBR3BCYixLQUFLSixTQUFTdUQsU0FDaEJuRCxLQUFLNEQsVUFBVTVELEtBQUtKLFNBQVN1RCxRQUFTbkQsS0FBS1UsT0FBT0csU0FHcERTLElBQUt0QixLQUFLbUIsWUFBYTRELElBQ3JCQSxFQUFVSyxRQUFVTCxFQUFVSyxPQUFPcEYsS0FBS1UsT0FBTyxJQUduRFYsS0FBS1UsT0FBT2lELEtBQU8zRCxLQUFLVSxPQUFPRyxPQUNqQyxDQU1BbUQsb0JBQXFCLENBRXJCUyx1QkFBd0Isa0JDcFQxQlksRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsZW9tYS8uL2FwcC9jbGFzc2VzL1BhZ2UuanMiLCJ3ZWJwYWNrOi8vZmxlb21hL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXV0b0JpbmQgZnJvbSBcImF1dG8tYmluZFwiO1xyXG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gXCJldmVudHNcIjtcclxuaW1wb3J0IGdzYXAgZnJvbSBcImdzYXBcIjtcclxuaW1wb3J0IFByZWZpeCBmcm9tIFwicHJlZml4XCI7XHJcbmltcG9ydCBlYWNoIGZyb20gXCJsb2Rhc2gvZWFjaFwiO1xyXG5pbXBvcnQgbWFwIGZyb20gXCJsb2Rhc2gvbWFwXCI7XHJcblxyXG5pbXBvcnQgQnV0dG9uIGZyb20gXCJhbmltYXRpb25zL0J1dHRvblwiO1xyXG5pbXBvcnQgTGluayBmcm9tIFwiYW5pbWF0aW9ucy9MaW5rXCI7XHJcbmltcG9ydCBMYWJlbCBmcm9tIFwiLi4vYW5pbWF0aW9ucy9MYWJlbFwiO1xyXG5pbXBvcnQgVGl0bGUgZnJvbSBcIi4uL2FuaW1hdGlvbnMvVGl0bGVcIjtcclxuaW1wb3J0IFBhcmFsbGF4IGZyb20gXCJhbmltYXRpb25zL1BhcmFsbGF4XCI7XHJcbmltcG9ydCBQYXJhZ3JhcGggZnJvbSBcIi4uL2FuaW1hdGlvbnMvUGFyYWdyYXBoXCI7XHJcbmltcG9ydCBIaWdobGlnaHQgZnJvbSBcIi4uL2FuaW1hdGlvbnMvSGlnaGxpZ2h0XCI7XHJcblxyXG5pbXBvcnQgQXN5bmNMb2FkIGZyb20gXCIuL0FzeW5jbG9hZFwiO1xyXG5cclxuaW1wb3J0IHsgbWFwRWFjaCB9IGZyb20gXCJ1dGlscy9kb21cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcclxuICBjb25zdHJ1Y3Rvcih7IGNsYXNzZXMsIGVsZW1lbnQsIGVsZW1lbnRzLCBpZCB9KSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIGF1dG9CaW5kKHRoaXMpO1xyXG5cclxuICAgIHRoaXMuY2xhc3NlcyA9IHtcclxuICAgICAgLi4uY2xhc3NlcyxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zZWxlY3RvcnMgPSB7XHJcbiAgICAgIGVsZW1lbnQsXHJcbiAgICAgIGVsZW1lbnRzOiB7XHJcbiAgICAgICAgcHJlbG9hZGVyczogXCJbZGF0YS1zcmNdXCIsXHJcblxyXG4gICAgICAgIGFuaW1hdGlvbnNCdXR0b25zOiAnW2RhdGEtYW5pbWF0aW9uPVwiYnV0dG9uXCJdJyxcclxuICAgICAgICBhbmltYXRpb25zTGlua3M6ICdbZGF0YS1hbmltYXRpb249XCJsaW5rXCJdJyxcclxuICAgICAgICBhbmltYXRpb25zUGFyYWxsYXhlczogJ1tkYXRhLWFuaW1hdGlvbj1cInBhcmFsbGF4XCJdJyxcclxuICAgICAgICBhbmltYXRpb25IaWdobGlnaHRzOiAnW2RhdGEtYW5pbWF0aW9uPVwiaGlnaGxpZ2h0XCJdJyxcclxuICAgICAgICBhbmltYXRpb25MYWJlbHM6ICdbZGF0YS1hbmltYXRpb249XCJsYWJlbFwiXScsXHJcbiAgICAgICAgYW5pbWF0aW9uVGl0bGVzOiAnW2RhdGEtYW5pbWF0aW9uPVwidGl0bGVcIl0nLFxyXG4gICAgICAgIGFuaW1hdGlvblBhcmFncmFwaHM6ICdbZGF0YS1hbmltYXRpb249XCJwYXJhZ3JhcGhcIl0nLFxyXG5cclxuICAgICAgICAuLi5lbGVtZW50cyxcclxuICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zY3JvbGwgPSB7XHJcbiAgICAgIGVhc2U6IDAuMDcsXHJcbiAgICAgIHBvc2l0aW9uOiAwLFxyXG4gICAgICBjdXJyZW50OiAwLFxyXG4gICAgICB0YXJnZXQ6IDAsXHJcbiAgICAgIGxpbWl0OiAwLFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmlkID0gaWQ7XHJcblxyXG4gICAgdGhpcy50cmFuc2Zvcm1QcmVmaXggPSBQcmVmaXgoXCJ0cmFuc2Zvcm1cIik7XHJcblxyXG4gICAgdGhpcy5jcmVhdGUoKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZSgpIHtcclxuICAgIHRoaXMuYW5pbWF0aW9ucyA9IFtdO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZWxlY3RvcnMuZWxlbWVudCk7XHJcbiAgICB0aGlzLmVsZW1lbnRzID0ge307XHJcblxyXG4gICAgZWFjaCh0aGlzLnNlbGVjdG9ycy5lbGVtZW50cywgKHNlbGVjdG9yLCBrZXkpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHNlbGVjdG9yIGluc3RhbmNlb2Ygd2luZG93LkhUTUxFbGVtZW50IHx8XHJcbiAgICAgICAgc2VsZWN0b3IgaW5zdGFuY2VvZiB3aW5kb3cuTm9kZUxpc3QgfHxcclxuICAgICAgICBBcnJheS5pc0FycmF5KHNlbGVjdG9yKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSBzZWxlY3RvcjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcblxyXG4gICAgICAgIC8vIGlmIGVtcHR5IE5vZGVMaXN0XHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHNba2V5XS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIHRoaXMuZWxlbWVudHNba2V5XSA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnRzW2tleV0ubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUFuaW1hdGlvbnMoKTtcclxuICAgIHRoaXMuY3JlYXRlT2JzZXJ2ZXIoKTtcclxuICAgIHRoaXMuY3JlYXRlUHJlbG9hZGVyKCk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVBbmltYXRpb25zKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBCdXR0b25zLlxyXG4gICAgICovXHJcbiAgICB0aGlzLmFuaW1hdGlvbnNCdXR0b25zID0gbWFwRWFjaChcclxuICAgICAgdGhpcy5lbGVtZW50cy5hbmltYXRpb25zQnV0dG9ucyxcclxuICAgICAgKGVsZW1lbnQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCdXR0b24oe1xyXG4gICAgICAgICAgZWxlbWVudCxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFuaW1hdGlvbnMucHVzaCguLi50aGlzLmFuaW1hdGlvbnNCdXR0b25zKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIExpbmtzLlxyXG4gICAgICovXHJcbiAgICB0aGlzLmFuaW1hdGlvbnNMaW5rcyA9IG1hcEVhY2goXHJcbiAgICAgIHRoaXMuZWxlbWVudHMuYW5pbWF0aW9uc0xpbmtzLFxyXG4gICAgICAoZWxlbWVudCwgaW5kZXgpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IExpbmsoe1xyXG4gICAgICAgICAgZWxlbWVudCxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFuaW1hdGlvbnMucHVzaCguLi50aGlzLmFuaW1hdGlvbnNMaW5rcyk7XHJcblxyXG4gICAgLy8gSGlnaGxpZ2h0c1xyXG4gICAgdGhpcy5hbmltYXRpb25IaWdobGlnaHRzID0gbWFwKFxyXG4gICAgICB0aGlzLmVsZW1lbnRzLmFuaW1hdGlvbkhpZ2hsaWdodHMsXHJcbiAgICAgIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBIaWdobGlnaHQoeyBlbGVtZW50IH0pO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKC4uLnRoaXMuYW5pbWF0aW9uSGlnaGxpZ2h0cyk7XHJcblxyXG4gICAgLy8gVGl0bGVzXHJcbiAgICB0aGlzLmFuaW1hdGlvblRpdGxlcyA9IG1hcCh0aGlzLmVsZW1lbnRzLmFuaW1hdGlvblRpdGxlcywgKGVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuIG5ldyBUaXRsZSh7IGVsZW1lbnQgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFuaW1hdGlvbnMucHVzaCguLi50aGlzLmFuaW1hdGlvblRpdGxlcyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJhbGxheGVzLlxyXG4gICAgICovXHJcbiAgICB0aGlzLmFuaW1hdGlvbnNQYXJhbGxheGVzID0gbWFwRWFjaChcclxuICAgICAgdGhpcy5lbGVtZW50cy5hbmltYXRpb25zUGFyYWxsYXhlcyxcclxuICAgICAgKGVsZW1lbnQpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFBhcmFsbGF4KHsgZWxlbWVudCB9KTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFuaW1hdGlvbnMucHVzaCguLi50aGlzLmFuaW1hdGlvbnNQYXJhbGxheGVzKTtcclxuXHJcbiAgICAvLyBQYXJhZ3JhcGhzXHJcbiAgICB0aGlzLmFuaW1hdGlvblBhcmFncmFwaHMgPSBtYXAoXHJcbiAgICAgIHRoaXMuZWxlbWVudHMuYW5pbWF0aW9uUGFyYWdyYXBocyxcclxuICAgICAgKGVsZW1lbnQpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFBhcmFncmFwaCh7IGVsZW1lbnQgfSk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hbmltYXRpb25zLnB1c2goLi4udGhpcy5hbmltYXRpb25QYXJhZ3JhcGhzKTtcclxuXHJcbiAgICAvLyBMYWJlbFxyXG4gICAgdGhpcy5hbmltYXRpb25MYWJlbHMgPSBtYXAodGhpcy5lbGVtZW50cy5hbmltYXRpb25MYWJlbHMsIChlbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiBuZXcgTGFiZWwoeyBlbGVtZW50IH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hbmltYXRpb25zLnB1c2goLi4udGhpcy5hbmltYXRpb25MYWJlbHMpO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlT2JzZXJ2ZXIoKSB7XHJcbiAgICB0aGlzLm9ic2VydmVyID0gbmV3IHdpbmRvdy5SZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xyXG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgIHRoaXMuc2Nyb2xsLmxpbWl0ID1cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLmNsaWVudEhlaWdodCAtIHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMuZWxlbWVudHMud3JhcHBlcik7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVQcmVsb2FkZXIoKSB7XHJcbiAgICB0aGlzLnByZWxvYWRlcnMgPSBtYXAodGhpcy5lbGVtZW50cy5wcmVsb2FkZXJzLCAoZWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gbmV3IEFzeW5jTG9hZCh7IGVsZW1lbnQgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFuaW1hdGlvbnNcclxuICAgKi9cclxuXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLnNjcm9sbCA9IHtcclxuICAgICAgZWFzZTogMC4wNyxcclxuICAgICAgcG9zaXRpb246IDAsXHJcbiAgICAgIGN1cnJlbnQ6IDAsXHJcbiAgICAgIHRhcmdldDogMCxcclxuICAgICAgbGltaXQ6IDAsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0KHZhbHVlKSB7XHJcbiAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gdGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5zY3JvbGwubGFzdCA9IHZhbHVlO1xyXG5cclxuICAgIHRoaXMudHJhbnNmb3JtKHRoaXMuZWxlbWVudHMud3JhcHBlciwgdGhpcy5zY3JvbGwuY3VycmVudCk7XHJcbiAgfVxyXG5cclxuICBzaG93KHVybCkge1xyXG4gICAgdGhpcy5yZXNldCgpO1xyXG5cclxuICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcclxuXHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgZ3NhcC5zZXQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB7XHJcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtYmFja2dyb3VuZFwiKSxcclxuICAgICAgY29sb3I6IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbG9yXCIpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gIH1cclxuXHJcbiAgaGlkZSh1cmwpIHtcclxuICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIC8vIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgLy8gICB0aGlzLmRlc3Ryb3koKTtcclxuXHJcbiAgICAvLyAgIHRoaXMuYW5pbWF0aW9uT3V0ID0gZ3NhcC50aW1lbGluZSgpO1xyXG4gICAgLy8gICB0aGlzLmFuaW1hdGlvbk91dC50byh0aGlzLmVsZW1lbnQsIHtcclxuICAgIC8vICAgICBhdXRvQWxwaGE6IDAsXHJcbiAgICAvLyAgICAgb25Db21wbGV0ZTogcmVzb2x2ZSxcclxuICAgIC8vICAgfSk7XHJcbiAgICAvLyB9KTtcclxuICB9XHJcblxyXG4gIHRyYW5zZm9ybShlbGVtZW50LCB5KSB7XHJcbiAgICBlbGVtZW50LnN0eWxlW3RoaXMudHJhbnNmb3JtUHJlZml4XSA9IGB0cmFuc2xhdGUzZCgwLCAkey1NYXRoLnJvdW5kKFxyXG4gICAgICB5XHJcbiAgICApfXB4LCAwKWA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFdmVudHNcclxuICAgKi9cclxuXHJcbiAgb25SZXNpemUoKSB7XHJcbiAgICBpZiAoIXRoaXMuZWxlbWVudHMud3JhcHBlcikgcmV0dXJuO1xyXG5cclxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICB0aGlzLnNjcm9sbC5saW1pdCA9XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLmNsaWVudEhlaWdodCAtIHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgICAgIGVhY2goXHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLFxyXG4gICAgICAgIChhbmltYXRpb24pID0+IGFuaW1hdGlvbi5vblJlc2l6ZSAmJiBhbmltYXRpb24ub25SZXNpemUoKVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvbldoZWVsKG5vcm1hbGl6ZWRXaGVlbCkge1xyXG4gICAgY29uc3Qgc3BlZWQgPSBub3JtYWxpemVkV2hlZWwucGl4ZWxZO1xyXG5cclxuICAgIHRoaXMuc2Nyb2xsLnRhcmdldCArPSBzcGVlZDtcclxuXHJcbiAgICByZXR1cm4gc3BlZWQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBMb29wc1xyXG4gICAqL1xyXG5cclxuICB1cGRhdGUoKSB7XHJcbiAgICB0aGlzLnNjcm9sbC50YXJnZXQgPSBnc2FwLnV0aWxzLmNsYW1wKFxyXG4gICAgICAwLFxyXG4gICAgICB0aGlzLnNjcm9sbC5saW1pdCxcclxuICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0XHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSBnc2FwLnV0aWxzLmludGVycG9sYXRlKFxyXG4gICAgICB0aGlzLnNjcm9sbC5jdXJyZW50LFxyXG4gICAgICB0aGlzLnNjcm9sbC50YXJnZXQsXHJcbiAgICAgIHRoaXMuc2Nyb2xsLmVhc2VcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHRoaXMuc2Nyb2xsLmN1cnJlbnQgPCAwLjAxKSB7XHJcbiAgICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmVsZW1lbnRzLndyYXBwZXIpIHtcclxuICAgICAgdGhpcy50cmFuc2Zvcm0odGhpcy5lbGVtZW50cy53cmFwcGVyLCB0aGlzLnNjcm9sbC5jdXJyZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBlYWNoKHRoaXMuYW5pbWF0aW9ucywgKGFuaW1hdGlvbikgPT4ge1xyXG4gICAgICBhbmltYXRpb24udXBkYXRlICYmIGFuaW1hdGlvbi51cGRhdGUodGhpcy5zY3JvbGwpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLmN1cnJlbnQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBMaXN0ZW5lcnNcclxuICAgKi9cclxuXHJcbiAgYWRkRXZlbnRMaXN0ZW5lcnMoKSB7fVxyXG5cclxuICByZW1vdmVFdmVudExpc3RlbmVycygpIHt9XHJcbn1cclxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiNjIwNDIxZTg0ZDIyMjM0M2MxNTZcIikiXSwibmFtZXMiOlsiRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJjbGFzc2VzIiwiZWxlbWVudCIsImVsZW1lbnRzIiwiaWQiLCJzdXBlciIsImF1dG9CaW5kIiwidGhpcyIsInNlbGVjdG9ycyIsInByZWxvYWRlcnMiLCJhbmltYXRpb25zQnV0dG9ucyIsImFuaW1hdGlvbnNMaW5rcyIsImFuaW1hdGlvbnNQYXJhbGxheGVzIiwiYW5pbWF0aW9uSGlnaGxpZ2h0cyIsImFuaW1hdGlvbkxhYmVscyIsImFuaW1hdGlvblRpdGxlcyIsImFuaW1hdGlvblBhcmFncmFwaHMiLCJzY3JvbGwiLCJlYXNlIiwicG9zaXRpb24iLCJjdXJyZW50IiwidGFyZ2V0IiwibGltaXQiLCJ0cmFuc2Zvcm1QcmVmaXgiLCJQcmVmaXgiLCJjcmVhdGUiLCJhbmltYXRpb25zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWFjaCIsInNlbGVjdG9yIiwia2V5Iiwid2luZG93IiwiSFRNTEVsZW1lbnQiLCJOb2RlTGlzdCIsIkFycmF5IiwiaXNBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJjcmVhdGVBbmltYXRpb25zIiwiY3JlYXRlT2JzZXJ2ZXIiLCJjcmVhdGVQcmVsb2FkZXIiLCJtYXBFYWNoIiwiaW5kZXgiLCJCdXR0b24iLCJwdXNoIiwiTGluayIsIm1hcCIsIkhpZ2hsaWdodCIsIlRpdGxlIiwiUGFyYWxsYXgiLCJQYXJhZ3JhcGgiLCJMYWJlbCIsIm9ic2VydmVyIiwiUmVzaXplT2JzZXJ2ZXIiLCJlbnRyaWVzIiwiZW50cnkiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3cmFwcGVyIiwiY2xpZW50SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJvYnNlcnZlIiwiQXN5bmNMb2FkIiwicmVzZXQiLCJzZXQiLCJ2YWx1ZSIsImxhc3QiLCJ0cmFuc2Zvcm0iLCJzaG93IiwidXJsIiwiaXNWaXNpYmxlIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJnc2FwIiwiZG9jdW1lbnRFbGVtZW50IiwiYmFja2dyb3VuZENvbG9yIiwiZ2V0QXR0cmlidXRlIiwiY29sb3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsImhpZGUiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsInkiLCJzdHlsZSIsIk1hdGgiLCJyb3VuZCIsIm9uUmVzaXplIiwiYW5pbWF0aW9uIiwib25XaGVlbCIsIm5vcm1hbGl6ZWRXaGVlbCIsInNwZWVkIiwicGl4ZWxZIiwidXBkYXRlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9